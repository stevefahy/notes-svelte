import{m as v,w as g,p as L,c as x,G as P,H as T,t as U,f as H,k as B,h as j,j as R,a as q,e as l,B as w,d as A,g as o,I as S,o as p,s as D,F as y,z as E,q as z,u as C,C as I,D as F,b as G,J}from"./index-D-V4zERQ.js";import{D as M,e as V,A as K,g as O}from"./AddNotebookForm-CA0dCu1b.js";import{a as Q}from"./addNotebook-6eCq7xKh.js";import{v as W,b as X}from"./vuetify-classes-DOjo5YWf.js";import{F as Y}from"./FooterView-DEofwuiu.js";import"./ErrorAlert-G22uhqMO.js";var Z=g('<div class="loading_outer svelte-1c7j09v"><div class="loading_inner svelte-1c7j09v"><div class="spinner svelte-1c7j09v"></div></div></div>');function $(c){var d=Z();v(c,d)}var tt=g('<a class="notebook-link"><li class="notebooks_list_bg"><div><div><div class="notebooks_list_outer"><div></div> <div class="notebooks_list_right"><div> </div> <div class="date_format"> </div></div></div></div></div></li></a>');function et(c,d){L(d,!0);var n=tt(),a=l(n),f=l(a),b=l(f),u=l(b),_=l(u),h=x(_,2),m=l(h),e=l(m),s=x(m,2),t=l(s);P(n,i=>T?.(i)),U((i,k,r)=>{B(n,"href",`/notebook/${d.notebook_item._id??""}`),j(f,1,i,"svelte-1lgq45b"),j(b,1,k,"svelte-1lgq45b"),j(_,1,`notebooks_list_left tab_${d.notebook_item.notebook_cover??""}`,"svelte-1lgq45b"),R(e,d.notebook_item.notebook_name),R(t,r)},[()=>H(W()),()=>H(X("cardcontent")),()=>M(d.notebook_item.updatedAt??"")]),v(c,n),q()}var ot=g('<ul class="notebooks_list svelte-kj1rnj"></ul> <!>',1),at=g('<button class="btn-footer btn-contained v-btn v-btn--elevated v-theme--myCustomLightTheme bg-secondary v-btn--density-default rounded-xl v-btn--size-default v-btn--variant-elevated contained medium button_fab" aria-label="Add notebook button" type="button"><span class="icon_text"><span class="material-symbols-outlined button_icon white">add_circle</span> Add Notebook</span></button>'),st=g("<!> <!>",1);function rt(c,d){L(d,!0);let n=D(!1);const a=y(()=>d.notebooks||[]),f=async(e,s)=>{const t=z(C).token;if(!t)return;const i=I(await Q(t,e,s));if(!i.ok){F(i.error??"Unknown error");return}p(n,!1),await d.onNotebooksReload?.()},b=()=>{p(n,!1)};var u=st(),_=w(u);{var h=e=>{var s=ot(),t=w(s);V(t,21,()=>o(a),r=>r._id,(r,N)=>{et(r,{get notebook_item(){return o(N)}})});var i=x(t,2);{var k=r=>{K(r,{method:"create",onAddNotebook:f,onCancel:b})};A(i,r=>{o(n)&&r(k)})}v(e,s)};A(_,e=>{(o(a).length>0||o(n))&&e(h)})}var m=x(_,2);Y(m,{children:(e,s)=>{var t=S(),i=w(t);{var k=r=>{var N=at();N.__click=()=>p(n,!0),v(r,N)};A(i,r=>{(o(a).length>0||o(n))&&r(k)})}v(e,t)}}),v(c,u),q()}E(["click"]);var nt=g('<div class="page_scrollable_header_breadcrumb_footer_list"><!></div>');function ut(c,d){L(d,!0);let n=D(!1),a=D(G({success:!1,notebooks:[]}));const f=e=>{if(!e||e.length===0)return e;const s=[...e].map(t=>({...t,updatedAt:t.updatedAt==="No date"||!t.updatedAt?"December 17, 1995 03:24:00":t.updatedAt}));return s.sort((t,i)=>new Date(t.updatedAt)>new Date(i.updatedAt)?1:-1),s.reverse()},b=async()=>{const s=z(C).token;if(s)try{const t=I(await O(s));if(!t.ok){F(t.error??"Unknown error");return}t.data.notebooks&&(p(a,{success:!0,notebooks:f(t.data.notebooks)},!0),p(n,!0))}catch(t){F(String(t))}};J(async()=>{await C.getAuth(),await b()});var u=S(),_=w(u);{var h=e=>{$(e)},m=e=>{var s=nt(),t=l(s);{let i=y(()=>o(a)&&"error"in o(a)?o(a).error:void 0),k=y(()=>o(a)&&"success"in o(a)?o(a).success:!1),r=y(()=>o(a)&&"notebooks"in o(a)?o(a).notebooks??[]:[]);rt(t,{get error(){return o(i)},get success(){return o(k)},get notebooks(){return o(r)},onNotebooksReload:b})}v(e,s)};A(_,e=>{o(n)?e(m,!1):e(h)})}v(c,u),q()}export{ut as default};
