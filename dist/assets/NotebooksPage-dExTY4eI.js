import{n as v,x as g,p as q,c as x,H as P,I as T,t as U,f as H,k as z,h as j,j as R,a as F,e as l,C as A,d as w,g as o,J as S,m as B,q as p,s as D,G as y,B as G,u as E,v as C,D as I,E as L,b as J,K}from"./index-gzXAQREY.js";import{D as M,e as V,A as O,g as Q}from"./AddNotebookForm-X6UDeTJJ.js";import{a as W}from"./addNotebook-C6vVI1tP.js";import{v as X,b as Y}from"./vuetify-classes-DOjo5YWf.js";import{F as Z}from"./FooterView-BwsloGuJ.js";import"./ErrorAlert-GxBBq72h.js";var $=g('<div class="loading_outer svelte-1c7j09v"><div class="loading_inner svelte-1c7j09v"><div class="spinner svelte-1c7j09v"></div></div></div>');function tt(c){var d=$();v(c,d)}var et=g('<a class="notebook-link"><li class="notebooks_list_bg"><div><div><div class="notebooks_list_outer"><div></div> <div class="notebooks_list_right"><div> </div> <div class="date_format"> </div></div></div></div></div></li></a>');function ot(c,d){q(d,!0);var n=et(),a=l(n),f=l(a),b=l(f),u=l(b),_=l(u),h=x(_,2),m=l(h),e=l(m),s=x(m,2),t=l(s);P(n,i=>T?.(i)),U((i,k,r)=>{z(n,"href",`/notebook/${d.notebook_item._id??""}`),j(f,1,i,"svelte-1lgq45b"),j(b,1,k,"svelte-1lgq45b"),j(_,1,`notebooks_list_left tab_${d.notebook_item.notebook_cover??""}`,"svelte-1lgq45b"),R(e,d.notebook_item.notebook_name),R(t,r)},[()=>H(X()),()=>H(Y("cardcontent")),()=>M(d.notebook_item.updatedAt??"")]),v(c,n),F()}var at=g('<ul class="notebooks_list svelte-kj1rnj"></ul> <!>',1),st=g('<button class="btn-footer btn-contained v-btn v-btn--elevated v-theme--myCustomLightTheme bg-secondary v-btn--density-default rounded-xl v-btn--size-default v-btn--variant-elevated contained medium button_fab" aria-label="Add notebook button" type="button"><span class="icon_text"><span class="material-symbols-outlined button_icon white">add_circle</span> Add Notebook</span></button>'),rt=g("<!> <!>",1);function nt(c,d){q(d,!0);let n=D(!1);const a=y(()=>d.notebooks||[]),f=async(e,s)=>{const t=E(C).token;if(!t)return;const i=I(await W(t,e,s));if(!i.ok){L(i.error??"Unknown error");return}p(n,!1),await d.onNotebooksReload?.()},b=()=>{p(n,!1)};var u=rt(),_=A(u);{var h=e=>{var s=at(),t=A(s);V(t,21,()=>o(a),r=>r._id,(r,N)=>{ot(r,{get notebook_item(){return o(N)}})});var i=x(t,2);{var k=r=>{O(r,{method:"create",onAddNotebook:f,onCancel:b})};w(i,r=>{o(n)&&r(k)})}v(e,s)};w(_,e=>{(o(a).length>0||o(n))&&e(h)})}var m=x(_,2);Z(m,{children:(e,s)=>{var t=S(),i=A(t);{var k=r=>{var N=st();B("click",N,()=>p(n,!0)),v(r,N)};w(i,r=>{(o(a).length>0||o(n))&&r(k)})}v(e,t)}}),v(c,u),F()}G(["click"]);var it=g('<div class="page_scrollable_header_breadcrumb_footer_list"><!></div>');function _t(c,d){q(d,!0);let n=D(!1),a=D(J({success:!1,notebooks:[]}));const f=e=>{if(!e||e.length===0)return e;const s=[...e].map(t=>({...t,updatedAt:t.updatedAt==="No date"||!t.updatedAt?"December 17, 1995 03:24:00":t.updatedAt}));return s.sort((t,i)=>new Date(t.updatedAt)>new Date(i.updatedAt)?1:-1),s.reverse()},b=async()=>{const s=E(C).token;if(s)try{const t=I(await Q(s));if(!t.ok){L(t.error??"Unknown error");return}t.data.notebooks&&(p(a,{success:!0,notebooks:f(t.data.notebooks)},!0),p(n,!0))}catch(t){L(String(t))}};K(async()=>{await C.getAuth(),await b()});var u=S(),_=A(u);{var h=e=>{tt(e)},m=e=>{var s=it(),t=l(s);{let i=y(()=>o(a)&&"error"in o(a)?o(a).error:void 0),k=y(()=>o(a)&&"success"in o(a)?o(a).success:!1),r=y(()=>o(a)&&"notebooks"in o(a)?o(a).notebooks??[]:[]);nt(t,{get error(){return o(i)},get success(){return o(k)},get notebooks(){return o(r)},onNotebooksReload:b})}v(e,s)};w(_,e=>{o(n)?e(m,!1):e(h)})}v(c,u),F()}export{_t as default};
