const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CdZc6Ife.js","assets/index-gzXAQREY.js","assets/index-DenYzloY.css","assets/AddNotebookForm-X6UDeTJJ.js","assets/ErrorAlert-GxBBq72h.js","assets/ErrorAlert-DZvNB_QY.css","assets/vuetify-classes-DOjo5YWf.js","assets/AddNotebookForm-BtUzU4dZ.css","assets/ViewNoteMarkdown-W4_zMct6.js","assets/saveNote-8kmoEnCa.js","assets/addNotebook-C6vVI1tP.js","assets/changeUsername-cUxQteGX.js","assets/FooterView-BwsloGuJ.js","assets/FooterView-DK_MiM7N.css","assets/index-XvzlHVTK.js"])))=>i.map(i=>d[i]);
import{L as F,A as lt,B as pt,p as dt,c as y,e as _,g as t,H as ht,t as et,f as st,h as it,m as T,l as Gt,q as d,n as w,a as ct,s as V,G as q,x as A,j as kt,M as Kt,b as St,N as bt,I as Ot,d as L,k as _t,O as Qt,P as Xt,v as H,E as M,J as Yt,C as rt,y as ft,Q as at,o as Zt,u as W,w as nt,D as J,R as te,S as ee,_ as oe}from"./index-gzXAQREY.js";import{e as Pt,b as re,D as ae,g as ne,A as se}from"./AddNotebookForm-X6UDeTJJ.js";import{V as ie,g as le}from"./ViewNoteMarkdown-W4_zMct6.js";import{F as At}from"./FooterView-BwsloGuJ.js";import{v as Tt,b as It}from"./vuetify-classes-DOjo5YWf.js";import{f as de}from"./index-XvzlHVTK.js";const ce={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_ENDPOINT:"https://www.snipbee.com/"},ue=ce,ve=lt,_e=async(g,c)=>{let a;try{if(a=await fetch((ue.VITE_API_ENDPOINT||"")+`api/data/notes/${c}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`}}),a.status===404)throw new Error(`${a.url} Not Found.`)}catch(e){return{error:F(e)}}let s;try{if(s=await a.json(),s===null)return{error:`${ve.NOTES_ERROR}`}}catch(e){return{error:F(e)}}return s&&"error"in s&&s.error?{error:s.error}:s},fe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_ENDPOINT:"https://www.snipbee.com/"},be=fe,pe=lt,he=async(g,c)=>{let a;const s={notebookID:c};try{if(a=await fetch((be.VITE_API_ENDPOINT||"")+"api/data/delete-notebook",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(s)}),a.status===404)throw new Error(`${a.url} Not Found.`)}catch(n){return{error:F(n)}}let e;try{if(e=await a.json(),e===null)return{error:`${pe.NOTEBOOK_DELETE_ERROR}`}}catch(n){return{error:F(n)}}return e&&"error"in e&&e.error?{error:e.error}:e},ke={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_ENDPOINT:"https://www.snipbee.com/"},me=ke,Ne=lt,ge=async(g,c)=>{let a;const s={note_ids:c};try{if(a=await fetch((me.VITE_API_ENDPOINT||"")+"api/data/delete-notes",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(s)}),a.status===404)throw new Error(`${a.url} Not Found.`)}catch(n){return{error:F(n)}}let e;try{if(e=await a.json(),e===null)return{error:`${Ne.NOTES_DELETE_ERROR}`}}catch(n){return{error:F(n)}}return e&&"error"in e&&e.error?{error:e.error}:e},we={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_ENDPOINT:"https://www.snipbee.com/"},ye=we,Ee=lt,De=async(g,c,a,s)=>{let e;const n={notes:a,notebookID:c,latestUpdatedNote:s};try{if(e=await fetch((ye.VITE_API_ENDPOINT||"")+"api/data/move-notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(n)}),e.status===404)throw new Error(`${e.url} Not Found.`)}catch(v){return{error:F(v)}}let h;try{if(h=await e.json(),h===null)return{error:`${Ee.NOTES_ERROR}`}}catch(v){return{error:F(v)}}return h&&"error"in h&&h.error?{error:h.error}:h};var Ae=A("<option> </option>"),Se=A('<div class="modal-container svelte-1lcsh5s"><div class="modal-overlay svelte-1lcsh5s" role="button" tabindex="0" aria-label="Close dialog"></div> <div role="dialog" aria-modal="true" aria-labelledby="move-notebook-title" tabindex="-1"><div><h2 id="move-notebook-title" class="dialogue-title">Move to Notebook</h2> <form id="move-notebook-form" class="form svelte-1lcsh5s"><div class="control svelte-1lcsh5s"><label for="notebooks-select" class="svelte-1lcsh5s">Name</label> <select id="notebooks-select" class="select_dialogue svelte-1lcsh5s"><option disabled="">Select a notebook...</option><!></select></div></form> <div class="button_row svelte-1lcsh5s"><div class="action svelte-1lcsh5s"><div class="move"><button type="submit" form="move-notebook-form" class="btn-contained v-btn--size-default svelte-1lcsh5s" aria-label="Move Note button">Move Note</button></div> <div class="cancel"><button type="button" class="btn-contained v-btn--size-default svelte-1lcsh5s" aria-label="Cancel button"><span class="icon_text svelte-1lcsh5s"><span class="material-symbols-outlined button_icon white svelte-1lcsh5s">cancel</span> Cancel</span></button></div></div></div></div></div></div>');function Oe(g,c){dt(c,!0);let a=V(""),s=q(()=>t(a)!==""&&t(a)!=="default");const e=q(()=>{const i=[...c.notebooks];return i.sort((E,O)=>{const Z=E.updatedAt==="No date"||!E.updatedAt?"December 17, 1995":E.updatedAt,Q=O.updatedAt==="No date"||!O.updatedAt?"December 17, 1995":O.updatedAt;return new Date(Z)>new Date(Q)?-1:1}),i}),n=q(()=>t(e).filter(i=>i._id!==c.currentNotebookId)),h=i=>{i.preventDefault(),i.stopPropagation(),c.onCancel()},v=async i=>{i.preventDefault(),i.stopPropagation(),!(!t(a)||!t(s))&&await c.onMoveNotes(t(a))};function p(i){return i.focus(),{}}var u=Se(),m=_(u),k=y(m,2),I=_(k),$=y(_(I),2),x=_($),R=y(_(x),2),j=_(R);j.value=j.__value="";var S=y(j);Pt(S,17,()=>t(n),i=>i._id,(i,E)=>{var O=Ae(),Z=_(O),Q={};et(()=>{kt(Z,t(E).notebook_name),Q!==(Q=t(E)._id)&&(O.value=(O.__value=t(E)._id)??"")}),w(i,O)});var Y=y($,2),G=_(Y),K=_(G),z=_(K),N=y(K,2),U=_(N);ht(k,i=>p?.(i)),et((i,E)=>{it(k,1,i,"svelte-1lcsh5s"),it(I,1,E,"svelte-1lcsh5s"),z.disabled=!t(s)},[()=>st(Tt("card","modal-dialog","dialogue_container")),()=>st(It())]),T("click",m,i=>h(i)),T("keydown",m,i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),h(i))}),T("keydown",k,i=>i.key==="Escape"&&h(i)),Gt("submit",$,v),re(R,()=>t(a),i=>d(a,i)),T("click",U,h),w(g,u),ct()}pt(["click","keydown"]);function Pe(g,c=10){if(!g?.trim())return"";const a=g.split(`
`),s=[];let e=0,n=[];for(;e<a.length&&s.length<c;){const h=a[e],v=h.trim();if(v.startsWith("```")){for(n.length>0&&(s.push(n.join(`
`)),n=[]),n=[h],e++;e<a.length&&!a[e].trim().startsWith("```");)n.push(a[e]),e++;e<a.length&&(n.push(a[e]),e++),s.push(n.join(`
`)),n=[];continue}if(v.startsWith("|")){n.length>0&&!n[0].trim().startsWith("|")&&(s.push(n.join(`
`)),n=[]);const k=[h];for(e++;e<a.length&&a[e].trim().startsWith("|");)k.push(a[e]),e++;k.length>=2&&s.length<c&&s.push(k.join(`
`));continue}if(v===""){n.length>0&&(s.push(n.join(`
`)),n=[]),e++;continue}const p=/^#{1,6}\s/.test(v),u=/^[-*+]\s/.test(v)||/^\d+\.\s/.test(v),m=v.startsWith(">");(p||u||m)&&n.length>0&&(s.push(n.join(`
`)),n=[]),n.push(h),e++}return n.length>0&&s.push(n.join(`
`)),s.slice(0,c).join(`

`)}var Te=A('<div class="box svelte-ebwjus"><article class="viewnote_content viewnote_thumb"><!></article></div>');function Ie(g,c){dt(c,!0);const a=q(()=>Pe(de(c.text).body??""));var s=Te(),e=_(s),n=_(e);ie(n,{get viewText(){return t(a)},disableLinks:!0}),w(g,s),ct()}var Re=A('<div class="thumb_select_outer svelte-uaddfd"><div class="thumb_select svelte-uaddfd"><input type="checkbox" name="Status"/></div></div>'),Ce=A('<li class="notebook_list_bg svelte-uaddfd"><div class="thumb_outer svelte-uaddfd"><a class="thumb_outer_link svelte-uaddfd"><div class="edit_link svelte-uaddfd" role="button"><div><div><div class="thumb_image svelte-uaddfd"><!></div> <div class="date_format date_format_notes"> </div></div></div></div></a> <!></div></li>'),xe=A('<ul class="notes_list svelte-uaddfd"></ul>');function $e(g,c){dt(c,!0);let a=Kt(c,"onNotesEdit",3,!1),s=V(St({})),e=!1;bt(()=>{const p=!!c.onClearNotesEdit;p&&!e&&(d(s,{},!0),c.onNotesSelected?.({selected:[]})),e=p});const n=(p,u)=>{d(s,{...t(s),[p]:u},!0);const m=Object.entries(t(s)).filter(([,k])=>k).map(([k])=>k);c.onNotesSelected?.({selected:m})},h=(p,u)=>{u.stopPropagation();const m=u.target;n(p,m.checked)};var v=xe();Pt(v,21,()=>c.notes,p=>p._id,(p,u)=>{var m=Ce(),k=_(m),I=_(k),$=_(I),x=_($),R=_(x),j=_(R),S=_(j);Ie(S,{get text(){return t(u).note}});var Y=y(j,2),G=_(Y);ht(I,N=>Ot?.(N));var K=y(I,2);{var z=N=>{var U=Re(),i=_(U),E=_(i);et(()=>{Qt(E,t(u)._id),_t(E,"id",`input_${t(u)._id??""}`),Xt(E,t(s)[t(u)._id]??!1)}),T("change",E,O=>h(t(u)._id,O)),T("click",E,O=>O.stopPropagation()),w(N,U)};L(K,N=>{a()&&N(z)})}et((N,U,i)=>{_t(I,"href",`/notebook/${t(u).notebook??""}/${t(u)._id??""}`),_t($,"tabindex",a()?0:-1),it(x,1,N,"svelte-uaddfd"),it(R,1,U,"svelte-uaddfd"),kt(G,i)},[()=>st(Tt("note_list_card")),()=>st(It("cardcontent")),()=>ae(t(u).updatedAt??"")]),T("click",I,N=>a()&&N.preventDefault()),T("click",$,N=>{a()&&(N.preventDefault(),n(t(u)._id,!t(s)[t(u)._id]))}),T("keydown",$,N=>{a()&&(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),n(t(u)._id,!t(s)[t(u)._id]))}),w(p,m)}),w(g,v),ct()}pt(["click","keydown","change"]);var Ve=A('<div class="loading_routes">Loading...</div>'),je=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white">arrow_back</span> Back to Notebooks</span></button>'),Me=A('<div class="page_scrollable_header_breadcrumb_footer_list"><div class="loading_routes error-state"><p> </p> <a href="/notebooks" class="back-link">Back to Notebooks</a></div></div> <!>',1),Le=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white">note_add</span> Add Note</span></button>'),Ue=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white">edit</span> Edit Notes</span></button>'),Be=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white">delete</span> Delete Notebook</span></button>'),He=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white">delete</span> Delete</span></button>'),Fe=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white symbol_size">flip_to_front</span> Move</span></button>'),ze=A('<button class="btn-footer btn-contained"><span class="icon_text"><span class="material-symbols-outlined button_icon white">cancel</span> Cancel</span></button>'),We=A("<!> <!> <!> <!> <!> <!>",1),Je=A('<div class="page_scrollable_header_breadcrumb_footer_list"><!> <!> <!></div> <!>',1);function qe(g,c){dt(c,!0);const a=()=>ft(te,"$paramsStore",n),s=()=>ft(ee,"$location",n),e=()=>ft(at,"$notebookEditStore",n),[n,h]=Zt(),v=q(()=>{const r=(c.params??a())?.notebookId;if(r)return r;const o=s();if(o){const C=/^\/notebook\/([^/]+)/.exec(o);if(C?.[1])return C[1]}const l=typeof window<"u"?window.location.hash:"";return/#?\/notebook\/([^/]+)/.exec(l)?.[1]??null});let p=V(null),u=V(null),m=V(null),k=V(!1),I=V(!1),$=V(!1),x=V(St([])),R=V(!1),j=V(!1),S=V(null);const Y=r=>{d(x,r.selected,!0)},G=r=>{const o=r.map(l=>({...l,updatedAt:l.updatedAt==="No date"||!l.updatedAt?"December 17, 1995 03:24:00":l.updatedAt}));return o.sort((l,f)=>new Date(l.updatedAt)>new Date(f.updatedAt)?1:-1),o.reverse()},K=async r=>{try{const o=W(H).token;if(!o){d(S,"Session expired. Redirecting to login."),d(I,!0),nt("/login");return}const l=J(await le(o,r));if(!l.ok){M(l.error??"Unknown error"),d(S,l.error??null,!0),d(I,!0);return}l.data.notebook&&(d(u,l.data.notebook,!0),at.update(f=>({...f,edited:l.data.notebook})))}catch(o){d(S,o instanceof Error?o.message:String(o),!0),M(t(S))}finally{d(I,!0)}},z=async r=>{try{const o=W(H).token;if(!o){d(k,!0);return}const l=J(await _e(o,r));if(!l.ok)M(l.error??"Unknown error"),d(S,l.error??null,!0);else if(l.data.notes){const f=Array.isArray(l.data.notes)?l.data.notes:[];d(p,G(f),!0)}else d(p,[],!0)}catch(o){d(S,o instanceof Error?o.message:String(o),!0),M(t(S))}finally{d(k,!0)}},N=async()=>{try{const r=W(H).token;if(!r)return;const o=J(await ne(r));if(!o.ok){M(o.error??"Unknown error");return}o.data.notebooks?d(m,Array.isArray(o.data.notebooks)?o.data.notebooks:[],!0):d(m,[],!0)}catch(r){M(r instanceof Error?r.message:String(r))}},U=()=>{t(v)&&nt(`/notebook/${t(v)}/create-note`)},i=async()=>{if(!confirm("Delete this notebook?"))return;const r=W(H).token;if(!r||!t(v))return;const o=J(await he(r,t(v)));if(!o.ok){M(o.error??"Unknown error");return}nt("/notebooks")},E=()=>{d(R,!0)},O=()=>{d(R,!1),d(x,[],!0)},Z=()=>{d(j,!0)},Q=()=>{d(j,!1)},Rt=async()=>{if(t(x).length===0)return;const r=W(H).token;if(!r)return;const o=J(await ge(r,t(x)));if(!o.ok){M(o.error??"Unknown error");return}O(),t(v)&&await z(t(v))},Ct=()=>{d($,!1),at.update(r=>({...r,editing:!1}))},xt=async(r,o)=>{const l=W(H).token;if(!l||!t(u))return;const{editNotebook:f}=await oe(async()=>{const{editNotebook:B}=await import("./index-CdZc6Ife.js");return{editNotebook:B}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])),C=J(await f(l,t(u)._id,r,o,new Date().toISOString()));if(!C.ok){M(C.error??"Unknown error");return}C.data.notebook_edited&&(d(u,C.data.notebook_edited,!0),at.update(B=>({...B,edited:C.data.notebook_edited,editing:!1})),d($,!1))},$t=r=>{const o=r.map(f=>t(p)?.find(C=>C._id===f)).filter(Boolean);return G(o)[0]?.updatedAt},Vt=async r=>{const o=W(H).token;if(!o||!t(v)||t(x).length===0)return;const l=$t(t(x)),f=J(await De(o,r,t(x),l));if(!f.ok){M(f.error??"Unknown error");return}f.ok&&(d(j,!1),O(),t(v)&&await z(t(v)))};bt(()=>{e()?.editing&&d($,!0)}),bt(()=>{const r=t(v);if(!r)return;d(k,!1),d(I,!1),d(S,null);let o=!1;return(async()=>{try{if(await H.getAuth(),o)return;await Promise.all([K(r),z(r),N()])}catch(f){o||(d(S,f instanceof Error?f.message:String(f),!0),M(t(S)),d(k,!0),d(I,!0))}})(),()=>{o=!0}});var mt=Yt(),jt=rt(mt);{var Mt=r=>{var o=Ve();w(r,o)},Lt=r=>{var o=Me(),l=rt(o),f=_(l),C=_(f),B=_(C),ut=y(C,2);ht(ut,tt=>Ot?.(tt));var vt=y(l,2);At(vt,{children:(tt,Nt)=>{var P=je();T("click",P,()=>nt("/notebooks")),w(tt,P)}}),et(()=>kt(B,t(S))),w(r,o)},Ut=r=>{var o=Je(),l=rt(o),f=_(l);{var C=P=>{{let ot=q(()=>t(p)??[]),X=q(()=>!t(R));$e(P,{get notes(){return t(ot)},onNotesSelected:Y,get onNotesEdit(){return t(R)},get onClearNotesEdit(){return t(X)}})}};L(f,P=>{t(u)&&t(p)!==null&&P(C)})}var B=y(f,2);{var ut=P=>{Oe(P,{get notebooks(){return t(m)},get currentNotebookId(){return t(v)},onMoveNotes:Vt,onCancel:Q})};L(B,P=>{t(j)&&t(m)&&P(ut)})}var vt=y(B,2);{var tt=P=>{se(P,{method:"edit",get notebook(){return t(u)},onAddNotebook:async(ot,X)=>await xt(ot,X),onCancel:Ct})};L(vt,P=>{t($)&&t(u)&&P(tt)})}var Nt=y(l,2);At(Nt,{children:(P,ot)=>{var X=We(),gt=rt(X);{var Bt=b=>{var D=Le();T("click",D,U),w(b,D)};L(gt,b=>{t(R)||b(Bt)})}var wt=y(gt,2);{var Ht=b=>{var D=Ue();T("click",D,E),w(b,D)};L(wt,b=>{!t(R)&&(t(p)??[]).length>0&&b(Ht)})}var yt=y(wt,2);{var Ft=b=>{var D=Be();T("click",D,i),w(b,D)};L(yt,b=>{(t(p)??[]).length<1&&b(Ft)})}var Et=y(yt,2);{var zt=b=>{var D=He();T("click",D,Rt),w(b,D)};L(Et,b=>{t(R)&&t(x).length>0&&b(zt)})}var Dt=y(Et,2);{var Wt=b=>{var D=Fe();T("click",D,Z),w(b,D)};L(Dt,b=>{t(R)&&t(x).length>0&&t(m)&&t(m).length>1&&b(Wt)})}var Jt=y(Dt,2);{var qt=b=>{var D=ze();T("click",D,O),w(b,D)};L(Jt,b=>{t(R)&&b(qt)})}w(P,X)}}),w(r,o)};L(jt,r=>{!t(I)||!t(k)?r(Mt):t(S)?r(Lt,1):r(Ut,!1)})}w(g,mt),ct(),h()}pt(["click"]);const to=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));export{to as N,ge as a,he as d,_e as g,De as m};
